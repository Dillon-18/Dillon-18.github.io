<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantry - Pemesanan Online (Default)</title>
  <link rel="stylesheet" href="index.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="navbar">
    <div class="nav-left">
      <span class="brand-name">Pantry</span>
      <img src="Pantry Primary Logo-01.png" alt="Pantry Logo" class="brand-logo"> 
    </div>
    <div class="nav-right">
      <button class="nav-btn btn-secondary" onclick="openModal('contact')">Contact Me</button>
      <button class="nav-btn btn-primary" onclick="window.location.href='cashier.html'">Dashboard Dapur</button>
    </div>
  </header>
  
  <div class="container">
    <div class="content-grid">
        
        <div id="menu-section">
            <h2>Menu Makanan</h2>
            <div class="menu-list" id="menu-makanan"></div>

            <h2 style="margin-top: 30px;">Menu Minuman</h2>
            <div class="menu-list" id="menu-minuman"></div>
        </div>

        <div id="cart-section">
            <div class="cart-box">
                <h2>üõí Keranjang Anda</h2>
                <div id="cart-list">
                    <p style="text-align: center; color: #999;">Keranjang kosong.</p>
                </div>
                
                <hr>
                <div class="cart-summary">
                    <p>Total Item: <span id="total-items">0</span></p>
                    <p class="total-price">Total Bayar: <span id="total-price">Rp0</span></p>
                </div>

                <input type="text" id="customer-name" placeholder="Masukkan Nama Anda (Wajib)" required style="width: 95%; margin: 15px 0 10px 0; padding: 10px; border-radius: 5px; border: 1px solid #ccc;">

                <button class="btn-primary" onclick="placeOrder()" style="width: 100%; margin-top: 10px;">Pesan Sekarang</button>
                <button class="btn-secondary" onclick="clearCart()" style="width: 100%; margin-top: 10px; background-color: #999;">Kosongkan Keranjang</button>
            </div>
        </div>
    </div>
  </div>

  <div id="contact-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('contact')">&times;</span>
      <h2>Kontak Kami</h2>
      <p>Jika ada pertanyaan atau masalah dengan pesanan, silakan hubungi kami di:</p>
      <p>Telepon: (021) 123-456</p>
      <p>Email: support@pantry.com</p>
    </div>
  </div>

  <footer>
    ¬© 2025 Pantry ‚Äî Dibuat dengan ‚ù§Ô∏è
  </footer>

  <script>
    // Data dummy untuk menu
    const menuItems = [
      // Makanan 
      { id: 1, name: "Nasi Goreng Spesial", price: 25000, category: "makanan" },
      { id: 2, name: "Mie Ayam Bakso", price: 22000, category: "makanan" },
      { id: 3, name: "Ayam Geprek Sambal Matah", price: 28000, category: "makanan" },
      { id: 7, name: "Kwetiau Goreng Seafood", price: 30000, category: "makanan" },
      { id: 8, name: "Capcay Kuah", price: 24000, category: "makanan" },
      
      // Minuman 
      { id: 4, name: "Kopi Susu Gula Aren", price: 18000, category: "minuman" },
      { id: 5, name: "Es Teh Manis Jumbo", price: 8000, category: "minuman" },
      { id: 6, name: "Jus Alpukat", price: 20000, category: "minuman" },
      { id: 9, name: "Lemon Tea Dingin", price: 15000, category: "minuman" },
      { id: 10, name: "Air Mineral", price: 5000, category: "minuman" },
    ];

    let cart = [];

    document.addEventListener('DOMContentLoaded', () => {
        const storedCart = sessionStorage.getItem('pantryCart');
        if (storedCart) { cart = JSON.parse(storedCart); }
        renderMenu();
        updateCart();
    });

    function formatRupiah(number) {
        return `Rp${number.toLocaleString('id-ID')}`;
    }

    function renderMenu() {
      const menuMakananEl = document.getElementById('menu-makanan');
      const menuMinumanEl = document.getElementById('menu-minuman');
      menuMakananEl.innerHTML = '';
      menuMinumanEl.innerHTML = '';

      menuItems.forEach(item => {
        const itemEl = document.createElement('div');
        itemEl.className = 'menu-item';
        itemEl.innerHTML = `
          <div class="item-info">
            <h3>${item.name}</h3>
            <p>${formatRupiah(item.price)}</p>
          </div>
          <button onclick="addToCart(${item.id})">Tambah +</button>
        `;
        
        if (item.category === 'makanan') {
          menuMakananEl.appendChild(itemEl);
        } else {
          menuMinumanEl.appendChild(itemEl);
        }
      });
    }

    function addToCart(itemId) {
        const item = menuItems.find(i => i.id === itemId);
        const existingItem = cart.find(i => i.id === itemId);

        if (existingItem) {
            existingItem.qty += 1;
        } else {
            cart.push({ ...item, qty: 1 });
        }
        sessionStorage.setItem('pantryCart', JSON.stringify(cart));
        updateCart();
    }

    function updateCart() {
      const cartListEl = document.getElementById('cart-list');
      const totalItemsEl = document.getElementById('total-items');
      const totalPriceEl = document.getElementById('total-price');

      cartListEl.innerHTML = '';
      let totalItems = 0;
      let totalPrice = 0;

      if (cart.length === 0) {
        cartListEl.innerHTML = '<p style="text-align: center; color: #999;">Keranjang kosong.</p>';
      } else {
        cart.forEach(item => {
          const itemTotal = item.price * item.qty;
          totalItems += item.qty;
          totalPrice += itemTotal;

          const itemEl = document.createElement('div');
          itemEl.className = 'cart-item'; 
          itemEl.innerHTML = `
            <span>${item.name}</span>
            <div class="item-controls">
                <button class="btn-cart-qty" onclick="changeQty(${item.id}, -1)">-</button>
                <span class="qty-display">${item.qty}</span>
                <button class="btn-cart-qty" onclick="changeQty(${item.id}, 1)">+</button>
            </div>
            <span>${formatRupiah(itemTotal)}</span>
          `;
          cartListEl.appendChild(itemEl);
        });
      }

      totalItemsEl.textContent = totalItems;
      totalPriceEl.textContent = formatRupiah(totalPrice);
    }
    
    function changeQty(itemId, delta) {
        const item = cart.find(i => i.id === itemId);
        if (!item) return;

        item.qty += delta;

        if (item.qty <= 0) {
            cart = cart.filter(i => i.id !== itemId);
        }
        sessionStorage.setItem('pantryCart', JSON.stringify(cart));
        updateCart();
    }

    function clearCart() {
        if (confirm("Yakin ingin mengosongkan keranjang?")) {
            cart = [];
            sessionStorage.removeItem('pantryCart');
            updateCart();
        }
    }

    function placeOrder() {
      if (cart.length === 0) return alert("Keranjang kosong!");
      
      const name = document.getElementById('customer-name').value.trim();
      if (!name) return alert("Masukkan nama Anda untuk pesanan ini!");

      const order = {
        id: Date.now(),
        customerName: name,
        items: [...cart],
        total: cart.reduce((s, i) => s + i.price * i.qty, 0),
        status: 'Baru', // Default status awal
        time: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })
      };

      // Simpan pesanan ke Local Storage untuk dilihat di Dashboard Dapur
      const orders = JSON.parse(localStorage.getItem('pantryOrders')) || [];
      orders.unshift(order); // Tambahkan pesanan baru di awal
      localStorage.setItem('pantryOrders', JSON.stringify(orders));
      
      cart = [];
      sessionStorage.removeItem('pantryCart');
      updateCart();
      renderMenu();
      
      alert(`‚úÖ Pesanan atas nama ${name} berhasil dibuat! Mohon tunggu pesanan Anda diproses di dapur.`);
    }
    
    function openModal(id) { document.getElementById(id + "-modal").style.display = "block"; }
    function closeModal(id) { document.getElementById(id + "-modal").style.display = "none"; }
    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = "none";
      }
    }
  </script>

</body>
</html>
